/* ==========================================================================
   Design System Tokens — Pete's Notebook
   See .interface-design/system.md for rationale
   ========================================================================== */

/* --- Light Mode (cream paper) --- */
:root {
  /* Ink hierarchy — graphite on paper */
  --ink: #2a2a28;
  --ink-secondary: #5c5a54;
  --ink-tertiary: #8a8780;
  --ink-muted: #b0ada6;

  /* Paper surfaces — cream, not white */
  --paper: #f5f2eb;
  --paper-raised: #faf8f3;
  --paper-inset: #edeae2;

  /* Rules — graph paper grid lines */
  --rule: rgba(90, 85, 75, 0.12);
  --rule-emphasis: rgba(90, 85, 75, 0.25);

  /* Accent — engineering graph paper teal */
  --grid-teal: hsl(165, 45%, 38%);
  --grid-teal-hover: hsl(165, 45%, 32%);

  /* Semantic */
  --mark-success: hsl(150, 40%, 38%);
  --mark-warning: hsl(38, 60%, 48%);
  --mark-error: hsl(4, 50%, 48%);

  /* Segments — visualization colors */
  --segment-a: rgba(225, 180, 90, 0.85);
  --segment-b: rgba(100, 175, 200, 0.85);

  /* Controls */
  --control-bg: var(--paper-inset);
  --control-hover: rgba(90, 85, 75, 0.08);
  --control-border: var(--rule-emphasis);

  /* Overlay */
  --overlay-bg: rgba(0, 0, 0, 0.55);

  /* Spacing scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-12: 3rem;

  /* Radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 10px;

  /* Legacy aliases — map old names to new tokens */
  --text-color: var(--ink);
  --text-muted: var(--ink-secondary);
  --bg-color: var(--paper);
  --nav-bg: var(--paper-raised);
  --border-color: var(--rule-emphasis);
  --accent-color: var(--grid-teal);
  --accent-hover: var(--grid-teal-hover);
  --button-bg: var(--control-bg);
  --button-hover: var(--control-hover);
  --button-border: var(--control-border);
}

/* --- Dark Mode (slate/chalkboard) — system preference --- */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --ink: #e2dfd8;
    --ink-secondary: #a8a49c;
    --ink-tertiary: #706d66;
    --ink-muted: #4a4843;

    --paper: #1e1e1c;
    --paper-raised: #26261f;
    --paper-inset: #18181a;

    --rule: rgba(200, 195, 185, 0.10);
    --rule-emphasis: rgba(200, 195, 185, 0.20);

    --grid-teal: hsl(165, 45%, 48%);
    --grid-teal-hover: hsl(165, 45%, 55%);

    --mark-success: hsl(150, 40%, 48%);
    --mark-warning: hsl(38, 55%, 52%);
    --mark-error: hsl(4, 45%, 55%);

    --control-bg: var(--paper-inset);
    --control-hover: rgba(200, 195, 185, 0.08);
    --control-border: var(--rule-emphasis);

    --overlay-bg: rgba(0, 0, 0, 0.7);
  }
}

/* --- Dark Mode (manual toggle) --- */
:root.dark {
  --ink: #e2dfd8;
  --ink-secondary: #a8a49c;
  --ink-tertiary: #706d66;
  --ink-muted: #4a4843;

  --paper: #1e1e1c;
  --paper-raised: #26261f;
  --paper-inset: #18181a;

  --rule: rgba(200, 195, 185, 0.10);
  --rule-emphasis: rgba(200, 195, 185, 0.20);

  --grid-teal: hsl(165, 45%, 48%);
  --grid-teal-hover: hsl(165, 45%, 55%);

  --mark-success: hsl(150, 40%, 48%);
  --mark-warning: hsl(38, 55%, 52%);
  --mark-error: hsl(4, 45%, 55%);

  --control-bg: var(--paper-inset);
  --control-hover: rgba(200, 195, 185, 0.08);
  --control-border: var(--rule-emphasis);

  --overlay-bg: rgba(0, 0, 0, 0.7);
}

/* ==========================================================================
   Reset and Base Styles
   ========================================================================== */

*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.65;
}

body {
  margin: 0;
  padding: 0;
  background: var(--paper);
  color: var(--ink);
  min-height: 100vh;
}

/* ==========================================================================
   Typography
   ========================================================================== */

h1, h2, h3, h4, h5, h6 {
  margin-top: 0;
  line-height: 1.3;
  font-weight: 600;
  letter-spacing: -0.01em;
}

h1 { font-size: 2rem; }
h2 { font-size: 1.5rem; }
h3 { font-size: 1.25rem; }

p {
  margin-top: 0;
}

a {
  color: var(--grid-teal);
}

a:hover {
  color: var(--grid-teal-hover);
}

/* ==========================================================================
   Components
   ========================================================================== */

/* Buttons */
.button {
  padding: var(--space-2) var(--space-4);
  border: 1px solid var(--control-border);
  border-radius: var(--radius-sm);
  background: var(--control-bg);
  color: var(--ink);
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.15s ease;
}

.button:hover {
  background: var(--control-hover);
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.button-accent {
  background: var(--grid-teal);
  border-color: var(--grid-teal);
  color: white;
}

.button-accent:hover {
  background: var(--grid-teal-hover);
  border-color: var(--grid-teal-hover);
}

/* SVG Container */
.svg-container {
  border: 1px solid var(--rule);
  border-radius: var(--radius-md);
  background: transparent;
  overflow: hidden;
}

/* Controls */
.controls {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  justify-content: center;
}

/* Info text */
.info {
  font-size: 0.85rem;
  color: var(--ink-secondary);
}

/* Legend */
.legend {
  display: flex;
  gap: var(--space-4);
  font-size: 0.8rem;
  align-items: center;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

/* Modal Overlay */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(2px);
}

.modal-content {
  position: relative;
  background: var(--paper);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.modal-close {
  position: absolute;
  top: -12px;
  right: -12px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid var(--rule-emphasis);
  background: var(--paper);
  color: var(--ink);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

.modal-close:hover {
  background: var(--control-hover);
}

/* ==========================================================================
   Utilities
   ========================================================================== */

.text-center { text-align: center; }
.mt-1 { margin-top: var(--space-2); }
.mt-2 { margin-top: var(--space-4); }
.mb-1 { margin-bottom: var(--space-2); }
.mb-2 { margin-bottom: var(--space-4); }
